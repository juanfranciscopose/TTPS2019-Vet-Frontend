<h1>Sección Mascotas</h1>
<!-- Modal -->
<div class="modal fade" id="historialTotal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width: 1000px;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Historial</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table table-hover table-bordered">
          <thead>
            <tr>
              <th scope="col">Nombre de mascota</th>
              <th scope="col">Fecha</th>
              <th scope="col">Tipo de Evento</th>
              <th scope="col">Descripcion de evento</th>
              <th scope="col">Droga recetada</th>
              <th scope="col">Resultado</th>
              <th scope="col">Indicaciones</th>
              <th scope="col">Motivo</th>
              <th scope="col">Peso</th>
              <th scope="col">Numero nacidos</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let h of historial">
              <td>{{this.nombreMascota(this.mascotas, h.mascotaId)}}</td>
              <td>{{h.fecha}}</td>
              <td>{{h.tipo_evento}}</td>
              <td>{{h.descripcion ? h.descripcion : '-'}}</td>
              <td>{{h.droga ? h.droga : '-'}}</td>
              <td>{{h.resultado ? h.resultado : '-'}}</td>
              <td>{{h.indicaciones ? h.indicaciones : '-'}}</td>
              <td>{{h.motivo ? h.motivo : '-'}}</td>
              <td>{{h.peso ? h.peso : '-'}}</td>
              <td>{{h.nro_nacidos ? h.nro_nacidos : '-'}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div *ngFor="let m of mascotas" class="modal fade" id="historial{{m.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width: 1000px;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Historial de {{m.nombre}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-primary" style="margin-bottom: 15px;">Agregar Evento</button>
        <form *ngIf="this.mostrarEvento" (ngSubmit)="agregarEvento()"></form>
        <table class="table table-hover table-bordered">
          <thead>
            <tr>
              <th scope="col">Fecha</th>
              <th scope="col">Tipo de Evento</th>
              <th scope="col">Descripcion de evento</th>
              <th scope="col">Droga recetada</th>
              <th scope="col">Resultado</th>
              <th scope="col">Indicaciones</th>
              <th scope="col">Motivo</th>
              <th scope="col">Peso</th>
              <th scope="col">Numero nacidos</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let h of m.historial">
              <td>{{h.fecha}}</td>
              <td>{{h.tipo_evento}}</td>
              <td>{{h.descripcion ? h.descripcion : '-'}}</td>
              <td>{{h.droga ? h.droga : '-'}}</td>
              <td>{{h.resultado ? h.resultado : '-'}}</td>
              <td>{{h.indicaciones ? h.indicaciones : '-'}}</td>
              <td>{{h.motivo ? h.motivo : '-'}}</td>
              <td>{{h.peso ? h.peso : '-'}}</td>
              <td>{{h.nro_nacidos ? h.nro_nacidos : '-'}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
<div class="perfilContainer">
  <button class="btn btn-dark" (click)="this.mostrarAgregar = !this.mostrarAgregar">Agregar Mascota</button>
  <button class="btn btn-info" data-toggle="modal"
  [attr.data-target]="'#' + 'historialTotal'">Ver Historial</button>
  <form *ngIf="this.mostrarAgregar" [formGroup]="formMascota" (ngSubmit)="agregarMascota()">
    <div class="row">
      <div class="col">
        <label for="nombre">Nombre de mascota</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkNombre" class="form-check-input" id="">
          <label for="checkNombre">¿Público?</label>
        </div>
        <input type="text" class="form-control" id="nombre" name="nombre" formControlName="nombre">
      </div>
      <div class="col">
        <label for="sexo">Sexo</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkSexo" class="form-check-input" id="">
          <label for="checkSexo">¿Público?</label>
        </div>
        <br>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="inlineRadioOptions" formControlName="sexo" id="sexoM" value="masculino">
          <label class="form-check-label" for="sexoM">Masculino</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="inlineRadioOptions" formControlName="sexo" id="sexoF" value="femenino">
          <label class="form-check-label" for="sexoF">Femenino</label>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="especie">Especie</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkEspecie" class="form-check-input" id="">
          <label for="checkEspecie">¿Público?</label>
        </div>
        <input type="text" class="form-control" id="especie" name="especie" formControlName="especie">
      </div>
      <div class="col">
        <label for="color">Color</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkColor" class="form-check-input" id="">
          <label for="checkColor">¿Público?</label>
        </div>
        <input type="text" class="form-control" id="color" name="color" formControlName="color">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="raza">Raza</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkRaza" class="form-check-input" id="">
          <label for="checkRaza">¿Público?</label>
        </div>
        <input type="text" class="form-control" id="raza" name="raza" formControlName="raza">
      </div>
      <div class="col">
        <label for="senas">Señas</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkSenas" class="form-check-input" id="">
          <label for="checkSenas">¿Público?</label>
        </div>
        <input type="text" class="form-control" id="senas" name="senas" formControlName="senas">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="nacimiento">Nacimiento</label>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="checkNaci" class="form-check-input" id="">
          <label for="checkNaci">¿Público?</label>
        </div>
        <input type="date" class="form-control" id="nacimiento" name="nacimiento" formControlName="nacimiento">
      </div>
      <button type="submit" [disabled]="!formMascota.valid" style="margin-top: 30px;"
        class="btn btn-primary">Agregar</button>
    </div>
  </form>
  <h2>Listado de mascotas</h2>
  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Especie</th>
        <th scope="col">Raza</th>
        <th scope="col">Sexo</th>
        <th scope="col">Color</th>
        <th scope="col">Senas</th>
        <th scope="col">Nacimiento</th>
        <th scope="col">Opciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let mascota of mascotas">
        <td>{{mascota.nombre}}</td>
        <td>{{mascota.especie}}</td>
        <td>{{mascota.raza}}</td>
        <td>{{mascota.sexo}}</td>
        <td>{{mascota.color}}</td>
        <td>{{mascota.senas}}</td>
        <td>{{mascota.nacimiento | date}}</td>
        <td>
          <nav class="buttons">
            <button class="btn btn-primary"
              style="margin-right: 10px;width: 50px; height: 50px;background-image: url(../../assets/images/lapiz.png); background-size: cover;"
              title="Editar Mascota" data-toggle="modal"
              [attr.data-target]="'#' + 'exampleModal' + mascota.id">
            </button>
            <button class="btn btn-primary"
              style="margin-right: 10px;width: 50px; height: 50px;background-image: url(../../assets/images/basura.png); background-size: cover;"
              title="Borrar Mascota" (click)="eliminarMascota(mascota)"></button>
            <button class="btn btn-primary"
              style="margin-right: 10px;width: 50px; height: 50px;background-image: url(../../assets/images/anotador.png); background-size: cover;"
              title="Historial de Mascota"
              data-toggle="modal"
              [attr.data-target]="'#' + 'historial' + mascota.id">
            </button>
          </nav>
        </td>
      </tr>
    </tbody>
  </table>
</div>
